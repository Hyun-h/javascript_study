# 9.2 암묵적 타입 변환

자바스크립트 엔진은 표현식을 평가할 때 개발자의 의도와 상관없이 코드의 문맥을 고려해 암묵적으로 데이터 타입을 강제 변환할 때가 있다.

표현식을 평가할 때 코드의 문맥에 맞지 않은 게 들어올 수 있다. 프로그래밍 언어에 따라 에러를 일으키기도 하지만 자바스크립트에서는 가급적 에러를 일으키지 않고 암묵적 타입 변환을 통해 표현식을 평가한다.

## 문자열 타입으로 변환

\+ 연산자는 피연산자 중 하나 이상이 문자열이면 문자열 연결 연산자로 동작한다. 문자열 연결 연산자의 모든 피연산자는 코드 문맥상 모두 문자열 타입이어야 한다.  
자바스크립트 엔진은 문자열 연결 연산자 표현식을 평가하기 위해 피연산자 중에 문자열이 아닌 게 있으면 문자열로 암묵적 타입 변환을 한다.

```js
1 + "2"; // -> "12"
```

연산자 표현식의 피연산자만이 암묵적 타입 변환이 되는 건 아니다. 자바스크립트 코드는 코드 문맥에 맞게 암묵적 타입 변환을 할 때도 있는데 대표적인 예가 템플릿 리터럴의 표현식 삽입이다. 표현식 삽입은 평과 결과를 문자열 타입으로 암묵적으로 변환한다.

```js
`1 + 1 = ${1 + 1}`; // -> "1 + 1 = 2"
```

아래는 자바스크립트 엔진이 문자열 타입으로 암묵적 타입 변환을 수행하는 걸 나열하였다.

```js
// 숫자 타입
0 + ""; // -> "0"
-0 + ""; // -> "0"
1 + ""; // -> "1"
-1 + ""; // -> "-1"
NaN + ""; // "NaN"
Infinity + ""; // -> "Infinity"
Infinity + ""; // -> "-Infinity"

//불리언 타입
true + ""; // -> "true"
false + ""; // -> "false"

// null 타입
null + ""; // -> "null"

// undefined 타입
undefined + ""; // -> "undefined"

// 심벌 타입
Symbol() + ""; // -> TypeError : Cannot convert a Symbol value to a string

// 객체 타입
({} + ""); // -> "[object object]"
Math + ""; // -> "[object Math]"
[] + ""; // -> ""
[10, 20] + ""; // -> "10, 20"
(function () {} + ""); // -> "function(){}"
Array + ""; // -> "function Array() { [native code] }"
```

## 숫자 타입으로 변환

자바스크립트 엔진은 산술 연산자 표현식을 평가하기 위해 산술 연산자의 피연산자 중에서 숫자 타입이 아닌 피연산자는 숫자 타입으로 암묵적 타입 변환한다.

```js
1 - "1"; // -> 0
1 * "10"; // -> 10
1 / "one"; // NaN : one은 숫자 타입으로 변환할 수 없다.
```

비교 연산자는 피연산자들의 크기를 비교한 후 불리언 값을 만든다. 코드의 문맥상 숫자열이 있어야 한다.자바스크립트 엔진은 비교 연산자 표현식을 평가하기 위해 피연산자 중에 문자열이 있으면 숫자열로 암묵적 타입 변환을 한다.

```js
"1" > 0; // -> true
```

\+ 단항 연산자는 피연산자가 숫자 타입의 값이 아니면 숫자 타입의 값으로 암묵적 타입 변환을 수행한다.

```js
// 문자열 타입
+""; // -> 0
+"0"; // -> 0
+"1"; // -> 1
+"string"; // -> NaN

// 불리언 타입
+true; // -> 1
+false; // -> 0

// null 타입
+null; // -> 0

// undefined
+undefined; // -> NaN

// 심벌 타입
+Symbol(); // TypeError: Cannot convert a Symbol value to a number

//객체 타입
+{}; // -> NaN
+[]; // -> 0
+[10, 10]; // -> NaN
+function () {}; // -> NaN
```

빈 문자열(''), 빈 배열([]), null, false는 0으로 true는 1로 변환된다.  
객체와 빈 배열이 아닌 배열, undefined는 변환되지 않아 NaN이 된다.

## 불리언 타입으로 변환

자바스크립트 엔진은 제어문의 조건식과 같이 불리언 값으로 평가되어야 할 문맥에서 불리언 타입이 아닌 값을 Truthy 값(참으로 평가되는 값) 또는 Falsy 값(거짓으로 평가되는 값)으로 구분한다.

- false로 평가되는 Falsy 값 : 이 외에는 true로 평가되는 Truthy 값이다
  - false
  - undefined
  - null
  - 0, -0
  - NaN
  - '' (빈 문자열)
